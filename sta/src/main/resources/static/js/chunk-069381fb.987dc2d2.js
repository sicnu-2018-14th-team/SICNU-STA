(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-069381fb"],{"159b":function(t,e,o){var i=o("da84"),a=o("fdbc"),l=o("17c2"),r=o("9112");for(var n in a){var s=i[n],c=s&&s.prototype;if(c&&c.forEach!==l)try{r(c,"forEach",l)}catch(u){c.forEach=l}}},"17c2":function(t,e,o){"use strict";var i=o("b727").forEach,a=o("a640"),l=o("ae40"),r=a("forEach"),n=l("forEach");t.exports=r&&n?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,o){"use strict";var i=o("23e7"),a=o("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},6230:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-card",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加角色")]),o("el-dialog",{attrs:{title:"添加角色",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{attrs:{model:t.addAuthForm}},[o("el-form-item",{attrs:{label:"角色名称"}},[o("el-input",{model:{value:t.addAuthForm.roleName,callback:function(e){t.$set(t.addAuthForm,"roleName",e)},expression:"addAuthForm.roleName"}})],1),o("el-form-item",{attrs:{label:"角色描述"}},[o("el-input",{model:{value:t.addAuthForm.description,callback:function(e){t.$set(t.addAuthForm,"description",e)},expression:"addAuthForm.description"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addAuth}},[t._v("确定")])],1)],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.roleList,"header-cell-style":{background:"#f5f7fa"},border:""}},[o("el-table-column",{attrs:{type:"index",label:"#"}}),o("el-table-column",{attrs:{prop:"roleId",label:"角色编号"}}),o("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),o("el-table-column",{attrs:{prop:"description",label:"角色描述"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return t.showAuth(e.row.roleId)}}}),o("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(o){return t.showAuthorEditDialog(e.row)}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(o){return t.deleteAuth(e.row.roleId)}}})]}}])})],1)],1),o("el-dialog",{attrs:{title:"修改角色权限",visible:t.AuthorEditDialogVisible,width:"50%"},on:{"update:visible":function(e){t.AuthorEditDialogVisible=e}}},[o("el-tree",{ref:"authTree",attrs:{data:t.allAuthList,"show-checkbox":"",props:t.authTreeProps,"default-expand-all":"","node-key":"authId","default-checked-keys":t.checkedKeys}}),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.AuthorEditDialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editAuthor(t.roleInfo.roleId)}}},[t._v("确 定")])],1)],1)],1)},a=[],l=(o("a4d3"),o("e01a"),o("4160"),o("159b"),o("b85c")),r={data:function(){return{loading:!0,dialogVisible:!1,AuthorEditDialogVisible:!1,roleList:[],roleInfo:{},authList:[],allAuthList:[],addAuthForm:{roleName:"",description:""},authTreeProps:{children:"children",label:"authName"},checkedKeys:[]}},created:function(){this.rolelist()},methods:{addAuth:function(){var t=this;this.dialogVisible=!1,axios.post(this.global.addAuth,this.$qs.stringify({roleName:this.addAuthForm.roleName,description:this.addAuthForm.description})).then((function(e){t.rolelist()}))},showAuth:function(t){},deleteAuth:function(t){var e=this;axios.get(this.global.deleteRole+t).then((function(t){e.$message.success(t.data.data),e.rolelist()}))},showAuthorEditDialog:function(t){var e=this;this.roleInfo=t,axios.post(this.global.menu).then((function(t){e.allAuthList=t.data.data})),axios.get(this.global.role_auth+t.roleId).then((function(t){e.authList=t.data.data,e.checkedKeys=[],e.authList.forEach((function(t,o){1!==t.authId&&5!==t.authId&&8!==t.authId&&11!==t.authId&&14!==t.authId&&18!==t.authId&&e.checkedKeys.push(t.authId)}))})),this.AuthorEditDialogVisible=!0},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},rolelist:function(){var t=this;axios.post(this.global.roleList).then((function(e){t.roleList=e.data.data,t.loading=!1}))},editAuthor:function(t){var e=this.$refs.authTree.getCheckedKeys();this.$refs.authTree.getHalfCheckedKeys().forEach((function(t){return e.push(t)}));var o,i="?roleId="+t,a=Object(l["a"])(e);try{for(a.s();!(o=a.n()).done;){var r=o.value;i+="&authIdList=",i+=r}}catch(n){a.e(n)}finally{a.f()}axios.get(this.global.role_updateauth+i).then((function(t){})),this.AuthorEditDialogVisible=!1,this.rolelist()}}},n=r,s=o("2877"),c=Object(s["a"])(n,i,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-069381fb.987dc2d2.js.map