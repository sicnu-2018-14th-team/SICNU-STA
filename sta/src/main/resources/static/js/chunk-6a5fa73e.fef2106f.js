(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a5fa73e"],{"2bf2":function(t,e,i){},"65fe":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("el-form",{ref:"programmingQuestionsFrom",attrs:{model:t.programmingQuestionsFrom,rules:t.rules,"label-width":"80px","label-position":"left"}},[i("el-form-item",{attrs:{label:"title","label-width":"0px",prop:"title"}},[i("el-input",{model:{value:t.programmingQuestionsFrom.title,callback:function(e){t.$set(t.programmingQuestionsFrom,"title",e)},expression:"programmingQuestionsFrom.title"}})],1),i("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"题目描述",prop:"description"}}),i("editor-bar",{model:{value:t.programmingQuestionsFrom.description,callback:function(e){t.$set(t.programmingQuestionsFrom,"description",e)},expression:"programmingQuestionsFrom.description"}}),i("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"输入描述",prop:"description"}}),i("editor-bar",{model:{value:t.programmingQuestionsFrom.input,callback:function(e){t.$set(t.programmingQuestionsFrom,"input",e)},expression:"programmingQuestionsFrom.input"}}),i("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"输出描述",prop:"description"}}),i("editor-bar",{model:{value:t.programmingQuestionsFrom.output,callback:function(e){t.$set(t.programmingQuestionsFrom,"output",e)},expression:"programmingQuestionsFrom.output"}}),i("el-divider"),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:100}},[i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"时间限制"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1e3,max:5e3},model:{value:t.programmingQuestionsFrom.timeLimit,callback:function(e){t.$set(t.programmingQuestionsFrom,"timeLimit",e)},expression:"programmingQuestionsFrom.timeLimit"}})],1)],1),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"空间限制"}},[i("el-input-number",{attrs:{size:"large","controls-position":"right",min:256,max:1024},model:{value:t.programmingQuestionsFrom.memoryLimit,callback:function(e){t.$set(t.programmingQuestionsFrom,"memoryLimit",e)},expression:"programmingQuestionsFrom.memoryLimit"}})],1)],1),i("el-col",{attrs:{span:7}},[i("el-form-item",{attrs:{label:"题目难度",prop:"difficulty"}},[i("el-select",{attrs:{placeholder:"请选择难易程度"},model:{value:t.programmingQuestionsFrom.difficulty,callback:function(e){t.$set(t.programmingQuestionsFrom,"difficulty",e)},expression:"programmingQuestionsFrom.difficulty"}},[i("el-option",{attrs:{label:"非常简单",value:"1"}}),i("el-option",{attrs:{label:"简单",value:"2"}}),i("el-option",{attrs:{label:"一般",value:"3"}}),i("el-option",{attrs:{label:"困难",value:"4"}}),i("el-option",{attrs:{label:"非常困难",value:"5"}})],1)],1)],1)],1),i("el-row",{attrs:{gutter:100}},[i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"题目分数",prop:"score"}},[i("el-select",{attrs:{placeholder:"请选择题目分数"},model:{value:t.programmingQuestionsFrom.score,callback:function(e){t.$set(t.programmingQuestionsFrom,"score",e)},expression:"programmingQuestionsFrom.score"}},[i("el-option",{attrs:{label:"1",value:"1"}}),i("el-option",{attrs:{label:"2",value:"2"}}),i("el-option",{attrs:{label:"5",value:"5"}}),i("el-option",{attrs:{label:"10",value:"10"}}),i("el-option",{attrs:{label:"15",value:"15"}}),i("el-option",{attrs:{label:"20",value:"20"}}),i("el-option",{attrs:{label:"25",value:"25"}}),i("el-option",{attrs:{label:"30",value:"30"}})],1)],1)],1),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"题目标签"}},[t._l(t.programmingQuestionsFrom.tagList,(function(e){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)],1)],1),i("el-divider"),t._l(this.programmingQuestionsFrom.samplesObj,(function(e,r){return i("el-card",{key:"item"+r,staticStyle:{"margin-top":"10px"}},[i("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s("样例"+(r+1)))]),i("el-divider"),i("el-row",{attrs:{gutter:100}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"输入样例",prop:"samplesObj."+r+".input",rules:t.rules.input}},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入输入样例"},model:{value:e.input,callback:function(i){t.$set(e,"input",i)},expression:"item.input"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"输出样例",prop:"samplesObj."+r+".output",rules:t.rules.output}},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:"输出样例"},model:{value:e.output,callback:function(i){t.$set(e,"output",i)},expression:"item.output"}})],1)],1)],1)],1)})),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{staticStyle:{"margin-top":"20px"},on:{click:t.addSample}},[t._v("增加样例")])],1),i("el-divider"),i("el-form-item",{attrs:{label:"提示"}}),i("editor-bar",{model:{value:t.programmingQuestionsFrom.hint,callback:function(e){t.$set(t.programmingQuestionsFrom,"hint",e)},expression:"programmingQuestionsFrom.hint"}}),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",{attrs:{span:15}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:1006/upload/test-case","on-success":t.handleSuccess}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.zip文件")])],1)],1)],1),i("el-table",{attrs:{data:t.updateData,stripe:""}},[i("el-table-column",{attrs:{label:"输入文件",prop:"input"}}),i("el-table-column",{attrs:{label:"输出文件",prop:"output"}})],1)],2),i("div",{staticStyle:{"text-align":"left"}},[void 0!==t.pId?i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.submitChangeForm("programmingQuestionsFrom")}}},[t._v("提交修改")]):i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.submitForm("programmingQuestionsFrom")}}},[t._v("创建编程题")])],1)],1)],1)},o=[],s=(i("a4d3"),i("e01a"),i("c975"),i("a434"),i("b85c")),a=(i("4328"),i("037f")),n={components:{EditorBar:a["a"]},data:function(){var t=function(t,e,i){e?i():i(new Error("请选择难度！"))},e=function(t,e,i){e?i():i(new Error("请选择分数！"))};return{Id:this.$route.query.id,pId:this.$route.query.pId,fileList:"",updateData:[],samplesObj:[{input:"",output:""}],programmingQuestionsFrom:{title:"",description:"",input:"",output:"",timeLimit:"",memoryLimit:"",difficulty:"",available:"1",tagList:[],samplesObj:[{input:"",output:""}],hint:"",userId:"",contestId:"",pathId:-1,score:""},inputVisible:!1,inputValue:"",rules:{title:[{required:!0,message:"请输入题目标题",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],Input:[{required:!0,message:"请输入输入描述",trigger:"blur"}],Output:[{required:!0,message:"请输入输出描述",trigger:"blur"}],difficulty:[{required:!0,validator:t,trigger:"change"}],score:[{required:!0,validator:e,trigger:"change"}],input:[{required:!0,message:"请输入输入样例",trigger:"blur"}],output:[{required:!0,message:"请输入输出样例",trigger:"blur"}]}}},methods:{addSample:function(){this.programmingQuestionsFrom.samplesObj.push({input:"",output:""})},submitForm:function(t){var e=this,i=this;this.programmingQuestionsFrom.contestId=this.Id,this.$refs[t].validate((function(t){if(!t)return e.$message.error("必选项未填写完整"),!1;var r={contestId:e.programmingQuestionsFrom.contestId,pathId:e.programmingQuestionsFrom.pathId,title:e.programmingQuestionsFrom.title,input:e.programmingQuestionsFrom.input,output:e.programmingQuestionsFrom.output,samples:JSON.stringify(e.programmingQuestionsFrom.samplesObj),difficulty:e.programmingQuestionsFrom.difficulty,description:e.programmingQuestionsFrom.description,tagList:e.programmingQuestionsFrom.tagList,available:1,score:e.programmingQuestionsFrom.score,timeLimit:e.programmingQuestionsFrom.timeLimit,memoryLimit:e.programmingQuestionsFrom.memoryLimit,hint:e.programmingQuestionsFrom.hint};axios.post(e.global.create_program_problem,r).then((function(t){console.log(t.data),200===t.data.code&&(i.$message.success("创建成功"),NaN!==i.programmingQuestionsFrom.contestId?i.$router.push({path:"/problem/list",query:{id:i.Id}}):i.$router.push("/problem/list"))}))}))},handleClose:function(t){this.programmingQuestionsFrom.tagList.splice(this.programmingQuestionsFrom.tagList.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue,e=0;if(t){var i,r=Object(s["a"])(this.programmingQuestionsFrom.tagList);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o===t){e=1;break}}}catch(a){r.e(a)}finally{r.f()}0===e?this.programmingQuestionsFrom.tagList.push(t):alert("重复的标签！")}this.inputVisible=!1,this.inputValue=""},handleSuccess:function(t,e,i){if(200===t.code){this.$message.success("文件上传成功"),this.updateData=[];var r,o=Object(s["a"])(t.data.input);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.updateData.push({input:a+".in",output:a+".out"})}}catch(n){o.e(n)}finally{o.f()}this.programmingQuestionsFrom.pathId=t.data.pathId}else this.$message.error("文件格式错误")},getupdatetext:function(){var t=this;axios.post(this.global.queryproblem_info,this.$qs.stringify({problemId:this.pId})).then((function(e){console.log(e.data),200===e.data.code&&(t.programmingQuestionsFrom=e.data.data,t.programmingQuestionsFrom.difficulty=e.data.data.difficulty+"",t.programmingQuestionsFrom.timeLimit=e.data.data.time_limit,t.programmingQuestionsFrom.memoryLimit=e.data.data.memory_limit,t.programmingQuestionsFrom.tagList=e.data.data.tag,t.programmingQuestionsFrom.samplesObj=JSON.parse(t.programmingQuestionsFrom.samples))}))},getfileupdate:function(){var t=this;axios.post(this.global.query_program_test_file_info,this.$qs.stringify({problemId:this.pId})).then((function(e){if(200===e.data.code){var i,r=Object(s["a"])(e.data.data);try{for(r.s();!(i=r.n()).done;){var o=i.value;t.updateData.push({input:o+".in",output:o+".out"})}}catch(a){r.e(a)}finally{r.f()}}}))},submitChangeForm:function(t){var e=this,i=this;this.programmingQuestionsFrom.contestId=this.Id,this.$refs[t].validate((function(t){if(!t)return e.$message.error("必选项未填写完整"),!1;var r={contestId:e.programmingQuestionsFrom.contestId,pathId:e.programmingQuestionsFrom.pathId,title:e.programmingQuestionsFrom.title,input:e.programmingQuestionsFrom.input,output:e.programmingQuestionsFrom.output,samples:JSON.stringify(e.programmingQuestionsFrom.samplesObj),difficulty:e.programmingQuestionsFrom.difficulty,description:e.programmingQuestionsFrom.description,tagList:e.programmingQuestionsFrom.tagList,available:1,score:e.programmingQuestionsFrom.score,timeLimit:e.programmingQuestionsFrom.timeLimit,memoryLimit:e.programmingQuestionsFrom.memoryLimit,hint:e.programmingQuestionsFrom.hint,problemId:e.pId};console.log(r),console.log(r.problemId),axios.post(e.global.update_program_problem,r).then((function(t){200===t.data.code?(i.$message.success("修改成功"),i.$router.push("/my-problem")):this.$message.error("修改失败")}))}))}},created:function(){void 0!==this.pId&&(this.getupdatetext(),this.getfileupdate())}},l=n,m=(i("7b83"),i("2877")),u=Object(m["a"])(l,r,o,!1,null,null,null);e["default"]=u.exports},"7b83":function(t,e,i){"use strict";i("2bf2")},a434:function(t,e,i){"use strict";var r=i("23e7"),o=i("23cb"),s=i("a691"),a=i("50c4"),n=i("7b0b"),l=i("65f0"),m=i("8418"),u=i("1dde"),p=i("ae40"),g=u("splice"),c=p("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,f=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!g||!c},{splice:function(t,e){var i,r,u,p,g,c,F=n(this),v=a(F.length),Q=o(t,v),y=arguments.length;if(0===y?i=r=0:1===y?(i=0,r=v-Q):(i=y-2,r=f(d(s(e),0),v-Q)),v+i-r>b)throw TypeError(h);for(u=l(F,r),p=0;p<r;p++)g=Q+p,g in F&&m(u,p,F[g]);if(u.length=r,i<r){for(p=Q;p<v-r;p++)g=p+r,c=p+i,g in F?F[c]=F[g]:delete F[c];for(p=v;p>v-r+i;p--)delete F[p-1]}else if(i>r)for(p=v-r;p>Q;p--)g=p+r-1,c=p+i-1,g in F?F[c]=F[g]:delete F[c];for(p=0;p<i;p++)F[p+Q]=arguments[p+2];return F.length=v-r+i,u}})},c975:function(t,e,i){"use strict";var r=i("23e7"),o=i("4d64").indexOf,s=i("a640"),a=i("ae40"),n=[].indexOf,l=!!n&&1/[1].indexOf(1,-0)<0,m=s("indexOf"),u=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:l||!m||!u},{indexOf:function(t){return l?n.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-6a5fa73e.fef2106f.js.map